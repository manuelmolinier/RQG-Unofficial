<form class="{{cssClass}}" autocomplete="off">

    {{!-- Sheet Header --}}
    {{log data}}
    <header class="sheet-header">
        <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="100" width="100"/>
        <div class="header-fields">
            <h1 class="charname"><input name="name" type="text" value="{{actor.name}}" placeholder="Name"/></h1>
            <div class="resource">
                <h3 class="charname">{{localize 'RQG.HP'}}</h3>
                <input type="text" name="data.attributes.hitpoints.value" value="{{data.attributes.hitpoints.value}}" data-dtype="Number"/>
                <span> / </span>
                <input type="text" name="data.attributes.hitpoints.max" value="{{data.attributes.hitpoints.max}}" data-dtype="Number"/>
            </div>
            <div class="resource">
                <h3 class="charname">{{localize 'RQG.MP'}}</h3>
                <input type="text" name="data.attributes.magicpoints.value" value="{{data.attributes.magicpoints.value}}" data-dtype="Number"/>
                <span> / </span>
                <input type="text" name="data.attributes.magicpoints.max" value="{{data.attributes.magicpoints.max}}" data-dtype="Number"/>
            </div>
        </div>
    </header>
    {{!-- Sheet Tab Navigation --}}
    <nav class="sheet-tabs tabs" data-group="primary">
        <a class="item" data-tab="summary">{{localize 'RQG.Summary'}}</a>
        <a class="item" data-tab="general">{{localize 'RQG.General'}}</a>
        <a class="item" data-tab="attributes">{{localize 'RQG.Characteristics'}}</a>
        <a class="item" data-tab="skills">{{localize 'RQG.Skills'}}</a>
        <a class="item" data-tab="combat">{{localize 'RQG.Combat'}}</a>
        <a class="item" data-tab="magic">{{localize 'RQG.Magic'}}</a>
        <a class="item" data-tab="description">{{localize 'RQG.Description'}}</a>
        <a class="item" data-tab="items">{{localize 'RQG.Items'}}</a>
        <!-- <a class="item" data-tab="flags">{{localize 'RQG.Flags'}}</a> -->
    </nav>

    {{!-- Sheet Body --}}
    <section class="sheet-body">
        {{!-- Summary Tab --}}
        <div  class="tab summary"  data-group="primary"  data-tab="summary">
            {{> "systems/runequest/templates/actor/parts/actor-summary.html"}}
        </div> 
        {{!-- Magic Tab --}}
        <div  class="tab magic"  data-group="primary"  data-tab="magic">
            {{!-- Spirit Spells --}}
            <ol class="skills-list">          
                <div class="skill-category" data-spelltype="spirit">
                    <li class="item flexrow item-header">
                        <div class="item-name">{{localize 'RQG.SpiritSpell'}}</div>
                        <div class="item-controls">
                            <a class="item-control item-create" title="Create item" data-type="spiritspell"><i class="fas fa-plus"></i></a>
                        </div>
                    </li>
                    {{#each actor.spells.spirit as |spell id|}}
                        <li class="item flexrow" data-item-id="{{spell._id}}" data-spellname="{{spell.name}}">
                            <h4 class="item-name"><a class="spiritspell-roll">{{spell.name}}</a></h4>
                            <h4 class="item-name"><a class="spiritspell-roll">{{spell.data.mpcost}}</a></h4>
                            <input class="experiencecheck" type="checkbox" name="spell.flags.dynamiceffects.alwaysActive" {{checked spell.flags.dynamiceffects.alwaysActive}}/>
                            <div class="item-controls">
                                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                            </div>
                        </li>
                    {{/each}}
                </div>
            </ol>
            {{!-- Cults --}}
            <ol class="skills-list">          
                <div class="skill-category" data-type="cult">
                    <li class="item flexrow item-header">
                        <div class="item-name">{{localize 'RQG.Cult'}}</div>
                        <div class="item-controls">
                            <a class="item-control item-create" title="Create item" data-type="cult"><i class="fas fa-plus"></i></a>
                        </div>
                    </li>
                    {{#each actor.cults as |cult id|}}
                        <li class="item flexrow" data-item-id="{{cult._id}}" data-cultname="{{cult.name}}">
                            <h4 class="item-name">{{cult.name}}</h4>
                            <h4 class="item-name">{{cult.data.rank}}</h4>
                            <h4 class="item-name">{{cult.data.subcult}}</h4>
                            <h4 class="item-name">{{cult.data.currentrunepoint}} / {{cult.data.maxrunepoint}}</h4>
                            <div class="item-controls">
                                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                            </div>
                        </li>
                    {{/each}}
                </div>
            </ol>
            {{!-- Rune Spells --}}
            <ol class="skills-list">          
                <div class="skill-category" data-spelltype="rune">
                    <li class="item flexrow item-header">
                        <div class="item-name">{{localize 'RQG.RuneSpell'}}</div>
                        <div class="item-controls">
                            <a class="item-control item-create" title="Create item" data-type="runespell"><i class="fas fa-plus"></i></a>
                        </div>
                    </li>
                    {{#each actor.spells.rune as |spell id|}}
                        <li class="item flexrow" data-item-id="{{spell._id}}" data-spellname="{{spell.name}}" data-rune="{{spell.data.rune}}">
                            <h4 class="item-name"><a class="runespell-roll">{{spell.name}}</a></h4>
                            <h4 class="item-name"><a class="runespell-roll">{{spell.data.points}}</a></h4>
                            <h4 class="item-name"><a class="runespell-roll">{{spell.data.rune}}</a></h4>
                            <div class="item-controls">
                                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                            </div>
                        </li>
                    {{/each}}
                </div>
            </ol>
        </div>

        {{!-- General Tab --}}
        <div  class="tab general"  data-group="primary"  data-tab="general">
            <ol class="skills-list">
                <li class="item flexrow item-header">
                    <div class="rqg-general">
                        <h3 class="charname">{{localize 'RQG.BirthYear'}}</h3>
                        <input type="text" name="data.general.birthyear.value" value="{{data.general.birthyear.value}}"/>
                    </div>            
                    <div class="rqg-general">
                        <h3 class="charname">{{localize 'RQG.Age'}}</h3>
                        <input type="text" name="data.general.age.value" value="{{data.general.age.value}}"/>
                    </div>            
                    <div class="rqg-general">
                        <h3 class="charname">{{localize 'RQG.Occupation'}}</h3>
                        <input type="text" name="data.general.occupation.value" value="{{data.general.occupation.value}}"/>
                    </div>
                    <div class="rqg-general">
                        <h3 class="charname">{{localize 'RQG.Ransom'}}</h3>
                        <input type="text" name="data.general.ransom.value" value="{{data.general.ransom.value}}"/>
                    </div>
                    <div class="rqg-general">
                        <h3 class="charname">{{localize 'RQG.Gender'}}</h3>
                        <input type="text" name="data.general.gender.value" value="{{data.general.gender.value}}"/>
                    </div>
                    <div class="rqg-general">
                        <h3 class="charname">{{localize 'RQG.Homeland'}}</h3>
                        <input type="text" name="data.general.homeland.value" value="{{data.general.homeland.value}}"/>
                    </div>
                    <div class="rqg-general">
                        <h3 class="charname">{{localize 'RQG.Reputation'}}</h3>
                        <input type="text" name="data.general.reputation.value" value="{{data.general.reputation.value}}"/>
                    </div>
                    <div class="rqg-general">
                        <h3 class="charname">{{localize 'RQG.StandardofLiving'}}</h3>
                        <input type="text" name="data.general.standardofliving.value" value="{{data.general.standardofliving.value}}"/>
                    </div>
                    <div class="rqg-general">
                        <h3 class="charname">{{localize 'RQG.Tribe'}}</h3>
                        <input type="text" name="data.general.tribe.value" value="{{data.general.tribe.value}}"/>
                    </div>
                    <div class="rqg-general">
                        <h3 class="charname">{{localize 'RQG.Clan'}}</h3>
                        <input type="text" name="data.general.clan.value" value="{{data.general.clan.value}}"/>
                    </div>
                    <div class="rqg-general">
                        <h3 class="charname">{{localize 'RQG.BaseIncome'}}</h3>
                        <input type="text" name="data.general.baseincome.value" value="{{data.general.baseincome.value}}"/>
                    </div>
                    <div class="rqg-general">
                        <h3 class="charname">{{localize 'RQG.Campaign'}}</h3>
                        <input type="text" name="data.general.campaign.value" value="{{data.general.campaign.value}}"/>
                    </div>             
                </li>
            {{!-- Passions --}}
            <li class="item flexrow item-header">         
                <ol class="skills-list">          
                    <div class="skill-category">
                        <li class="item flexrow item-header">
                            <div class="item-name">{{localize "RQG.Passions"}}</div>
                            <div class="item-controls">
                                <a class="item-control item-create" title="Create item" data-type="passion"><i class="fas fa-plus"></i></a>
                            </div>
                        </li>
                        {{#each actor.passions as |passion id|}}
                            <li class="item flexrow" data-item-id="{{passion._id}}" data-passionname="{{passion.name}}">
                                <h4 class="item-name"><a class="passion-roll">{{passion.name}}</a></h4>
                                <h4 class="item-name"><a class="passion-roll">{{passion.data.total}}</a></h4>
                                <div class="item-controls">
                                    <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                                    <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                                </div>
                            </li>
                        {{/each}}
                    </div>
                </ol>
            </li>
        </div>

        {{!-- Combat Tab --}}
        <div  class="tab combat"  data-group="primary"  data-tab="combat">
            {{> "systems/runequest/templates/actor/parts/actor-combat.html"}}
        </div>
        {{!-- Skills Tab --}}
        <div  class="tab skills"  data-group="primary"  data-tab="skills">
            {{> "systems/runequest/templates/actor/parts/actor-skills.html"}}
        </div>

        {{!-- Biography Tab --}}
        <div class="tab biography" data-group="primary" data-tab="description">
            {{editor content=data.biography target="data.biography" button=true owner=owner editable=editable}}
        </div>

        {{!-- Owned Items Tab --}}
        <div class="tab items" data-group="primary" data-tab="items">
            <ol class="items-list">
            {{#each actor.gear as |item id|}}
                <li class="item flexrow" data-item-id="{{item._id}}">
                    <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                    <h4 class="item-name">{{item.name}}</h4>
                    <div class="item-controls">
                        <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                        <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                    </div>
                </li>
            {{/each}}
            </ol>
        </div>
        {{!-- Attributes Tab --}}
        <div class="tab attributes" data-group="primary" data-tab="attributes">
            <header class="attributes-header flexrow">
                <span class="attribute-key">{{localize "RQG.Characteristics"}}</span>
                <span class="attribute-value">{{localize "RQG.Base"}}</span>
                <span class="attribute-label">{{localize "RQG.Modifier"}}</span>
                <span class="attribute-dtype">{{localize "RQG.Value"}}</span>
            </header>
            <ol  class="attributes-list">
                {{#each data.characteristics as |characteristic id|}}
                    <li  class="attribute flexrow"  data-attribute="" data-characteristic="{{id}}">
                        <!-- <span  class="attribute-label" name="data.characteristics.{{id}}.label"><a class="characteristic-roll rollable">{{localize characteristic.label}}</a></span> -->
                        <span class="attribute-label characteristic-roll rollable" name="data.characteristics.{{id}}.label">{{localize characteristic.label}}</span>
                        <div  class="attribute-editbox">
                            <input  class="attribute-value"  type="text"  name="data.characteristics.{{id}}.base"  value="{{characteristic.base}}"  data-dtype="Number"  />
                        </div>  
                        <div  class="attribute-editbox">
                            <input  class="attribute-value"  type="text"  name="data.characteristics.{{id}}.modifier"  value="{{characteristic.modifier}}"  data-dtype="Number"  />
                        </div>
                        <span  class="attribute-label" name="data.characteristics.{{id}}.value"><a class="characteristic-roll rollable">{{characteristic.value}}</a></span>  
                    </li>
                {{/each}}
            </ol>
            <ol  class="attributes-list">
                {{#each data.elementalrunes as |elementalrune id|}}
                    <li  class="attribute flexrow"  data-attribute="" data-rune="{{id}}"">
                        <span  class="attribute-label flexrow"  name="data.elementalrunes.{{id}}.label"><a class="elementalrunes-roll">{{localize elementalrune.label}}</a></span>
                        <div  class="attribute-editbox">
                            <input  class="attribute-value"  type="text"  name="data.elementalrunes.{{id}}.value"  value="{{elementalrune.value}}"  data-dtype="Number"  />
                        </div>
                    </li>
                {{/each}}
            </ol>
            <ol  class="attributes-list">
                {{#each data.powerrunes as |powerrunepair pairid|}}
                    <li  class="attribute flexrow"  data-attribute="" data-runepair="{{pairid}}"">
                    {{#each powerrunepair as |powerrune runeid|}}
                        <span  class="attribute-label"  name="data.powerrunes.{{pairid}}.{{runeid}}.label"><a class="powerrunes-roll" data-rune="{{runeid}}">{{localize powerrune.label}}</a></span>
                        <div  class="attribute-editbox">
                            <input  class="attribute-value"  type="text"  name="data.powerrunes.{{pairid}}.{{runeid}}.value"  value="{{powerrune.value}}"  data-dtype="Number"  />
                        </div>
                    {{/each}}
                    </li>
                {{/each}}
            </ol>
        </div>
        {{!-- Flags Tab --}}
        <div class="tab flags" data-group="primary" data-tab="flags">
            <ol class="skills-list">
            {{#each actor.flags as |scope scopekey|}}
                <div class="skill-category" data-skillcategory="{{skillcategory}}">
                    <li class="item flexrow item-header">
                        <div class="item-name">{{scopekey}}</div>
                        <!-- <div class="item-controls">
                            <a class="item-control item-create" title="Create item" data-type="skill" data-skillcategory="{{skillcategory}}"><i class="fas fa-plus"></i></a>
                        </div> -->
                    </li>
                    {{#each scope as |flag flagkey|}}
                        <li class="item flexrow" data-flag-key="{{flagkey}}">
                            <h4 class="item-name">{{flag}}</h4>
                            <!-- <div class="item-controls">
                                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                            </div> -->
                        </li>
                    {{/each}}
                </div>
            {{/each}}
            </ol>
        </div>

    </section>
</form>

